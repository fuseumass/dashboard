<div class="my-4 my-md-5">
  <div class="container">
    <div class="row">
      <div class="card">
        <div class="card-status bg-primary-color"></div>
        <div class="card-header event-application-card-padding">
          <h2 class="page-title event-application-page-title-margin-right">
            HackUMass Applications
          </h2>
        </div>
       <div class="card-body">
        <ul class="nav nav-tabs border-0 flex-column flex-lg-row event-application-flex-space-around">
          <li class="<%= 'active' if all_is_active?(params) %>">
            <a href="<%= event_applications_path %>">
              All <span class="tag tag-purple bg-primary-color"><%= @all_apps_count%></span></a>
          </li>

          <li class="<%= 'active' if undecided_is_active?(params) %>">
            <a href="<%= event_applications_path(status: 'undecided') %>">
              Undecided <span class="tag tag-secondary"><%= @undecided_count%></span></a>
          </li>

          <li class="<%= 'active' if accepted_is_active?(params) %>">
            <a href="<%= event_applications_path(status: 'accepted') %>">
              Accepted <span class="tag tag-success"><%= @accepted_count %></span></a>
          </li>

          <li class="<%= 'active' if waitlisted_is_active?(params) %>">
            <a href="<%= event_applications_path(status: 'waitlisted') %>">
              Waitlisted<span class="tag tag-warning"><%= @waitlisted_count %></span></a>
          </li>

          <li class="<%= 'active' if denied_is_active?(params) %>">
            <a href="<%= event_applications_path(status: 'denied') %>">
              Denied<span class="tag tag-danger"><%= @denied_count%></span></a>
          </li>

          <li class="<%= 'active' if flagged_is_active?(params) %>">
            <a href="<%= event_applications_path(flagged: true) %>">
              Flagged<span class="tag tag-danger"><%= @flagged_count%></span></a>
          </li>

        </ul>

        <%= form_tag search_event_applications_path, method: :get, class:'col-lg-12' do%>
          <div class="row gutters-xs">
            <div class="col">
              <%= text_field_tag :search, params[:search], class: 'form-control', placeholder: 'Search for anything i.e. name, status, university, major, sex etc.', :autofocus => true %>
            </div>
            <span class="col-auto">
              <%= submit_tag 'Search', name: nil, class: 'btn btn-secondary' %>
            </span>
          </div>
        <%end%>

          <% if (!@posts.nil? and @posts.count > 0) %>
            <table class='table table-striped table-hover'>
              <thead>
              <tr>
                <th class='table-header'>Application Status</th>
                <th class='table-header'>Name</th>
                <th class='table-header'>University</th>
                <th class='table-header'>Major</th>
                <th class='table-header'>Graduation Year</th>
              </tr>
              </thead>
              <tbody>
              <% @posts.each do |form| %>
                <% show_form = event_application_path(form) %>

                <tr class='table-row'>
                  <td>
                    <a class='table-link' href='<%= show_form %>'>
                      <% if form.application_status == 'undecided'%>
                <span class="label label-info">
                      <% elsif form.application_status == 'accepted' %>
                <span class="label label-success">
                      <% elsif form.application_status == 'denied' %>
                <span class="label label-danger">
                      <% else form.application_status == 'waitlisted' %>
                <span class="label label-warning">
                      <% end %>
                      <%= form.application_status.capitalize %>
                      </span>
                    </a>
                  </td>
                  <td>
                    <a class='table-link' href='<%= show_form %>'>
                      <%= form.name %>
                    </a>
                  </td>
                  <td>
                    <a class='table-link' href='<%= show_form %>'>
                      <%= form.university %>
                    </a>
                  </td>
                  <td>
                    <a class='table-link' href='<%= show_form %>'>
                      <%= form.major %>
                    </a>
                  </td>
                  <td>
                    <a class='table-link' href='<%= show_form %>'>
                      <%= form.grad_year %>
                    </a>
                  </td>
                </tr>
              <% end %>
              </tbody>
            </table>

          <% else %>
            <div class="panel panel-default">
              <div class="panel-body">
                <center>
                  <h4>No applications found with that query...</h4>
                </center>
                <center><img style="height: 30%;width: 30%" src="https://media.giphy.com/media/20k1punZ5bpmM/giphy.gif"></center>
              </div>
            </div>

          <% end %>
          <%= will_paginate @posts %>

        </div>
      </div>
    </div>
  </div>
</div>
