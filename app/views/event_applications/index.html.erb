<div class='form-group'>
  <legend>HackUMass Applications</legend>
</div>

<div class="panel panel-default">
  <div class="panel-body">
    <ul class="nav nav-pills">
      <li class="<%= 'active' if isAllActive(params) %>">
        <a href="<%= event_applications_path %>">
        All <span class="badge"><%= @all_apps_count%></span></a>
      </li>

      <li class="<%= 'active' if isUndecidedActive(params) %>">
        <a href="<%= event_applications_path(:status => 'undecided') %>">
        Undecided <span class="badge"><%= @undecided_count%></span></a>
      </li>

      <li class="<%= 'active' if isAcceptedActive(params) %>">
        <a href="<%= event_applications_path(:status => 'accepted') %>">
        Accepted <span class="badge"><%= @accepted_count %></span></a>
      </li>

      <li class="<%= 'active' if isWaitlistedActive(params) %>">
        <a href="<%= event_applications_path(:status => 'waitlisted') %>">
        Waitlisted<span class="badge"><%= @waitlisted_count %></span></a>
      </li>

      <li class="<%= 'active' if isDeniedActive(params) %>">
        <a href="<%= event_applications_path(:status => 'denied') %>">
        Denied<span class="badge"><%= @denied_count%></span></a>
      </li>

      <li class="<%= 'active' if isFlaggedActive(params) %>">
        <a href="<%= event_applications_path(:flagged => true) %>">
        Flagged<span class="badge"><%= @flagged_count%></span></a>
      </li>

    </ul>
  </div>
</div>

<div class="panel panel-default">
  <div class="panel-body">
      <%= form_tag search_event_applications_path, method: :get, class:'col-lg-12' do%>
          <div class="input-group">
          <%= text_field_tag :search, params[:search], class: 'form-control', placeholder: 'Search for anything i.e. name, status, university, major, sex etc.', :autofocus => true %>
            <span class="input-group-btn">
              <%= submit_tag 'Search', name: nil, class: 'btn btn-primary' %>
            </span>
          </div>
      <%end%>
    </div>
</div>

<% if (!@posts.nil? and @posts.count > 0) %>
  <table class='table table-striped table-hover'>
    <thead>
      <tr>
        <th class='table-header'>Application Status</th>
        <th class='table-header'>Name</th>
        <th class='table-header'>University</th>
        <th class='table-header'>Major</th>
        <th class='table-header'>Graduation Year</th>
      </tr>
    </thead>
    <tbody>
      <% @posts.each do |form| %>
        <% show_form = event_application_path(form) %>
        
        <tr class='table-row'>
          <td> 
            <a class='table-link' href='<%= show_form %>'>
              <% if form.application_status == 'undecided'%>
                <span class="label label-info">
              <% elsif form.application_status == 'accepted' %>
                <span class="label label-success">
              <% elsif form.application_status == 'denied' %>
                <span class="label label-danger">
              <% else form.application_status == 'waitlisted' %>
                <span class="label label-warning">
              <% end %>
                <%= form.application_status.capitalize %>
              </span>
            </a>
          </td>
          <td> 
            <a class='table-link' href='<%= show_form %>'>
              <%= form.name %>
            </a>
          </td>
          <td> 
            <a class='table-link' href='<%= show_form %>'>
              <%= form.university %>
            </a>
          </td>
          <td> 
            <a class='table-link' href='<%= show_form %>'>
              <%= form.major %>
            </a>
          </td>
          <td> 
            <a class='table-link' href='<%= show_form %>'>
              <%= form.grad_year %>
            </a>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table> 

<% else %>
<div class="panel panel-default">
  <div class="panel-body">
  <center>
    <h4>No applications found with that query...</h4>
  </center>
  <center><img style="height: 30%;width: 30%" src="https://media.giphy.com/media/20k1punZ5bpmM/giphy.gif"></center>
  </div>
</div>
  
<% end %>
<%= will_paginate @posts %>